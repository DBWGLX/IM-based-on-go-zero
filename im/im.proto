syntax = "proto3";

package im;
option go_package = "./im";

// 消息结构体
message Message{
    string msgId = 1;
    string fromUserId = 2;
    string toUserId = 3;

    string content = 4;
    int64 createTime = 5;
}

//存储
message StoreMessageRequest{
    Message msg = 1;
}

message StoreMessageResponse{
    string msgId = 1;
}

//拉取
message GetHistoryRequest{
    string userId = 1;
    string targetId = 2;
    int64 startSeq = 3;//序号
    int32 count = 4;
}

message GetHistoryResponse{
    repeated Message msgs = 1;
}

//IM服务
service IMService{
    rpc StoreMessage(StoreMessageRequest) returns (StoreMessageResponse);
    rpc GetHistory(GetHistoryRequest) returns (GetHistoryResponse);
}